<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Modulo: /Users/enricoeberhard/Documents/EPFL/Dev/modulo/source/modulo_core/include/modulo_core/Recorder.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Modulo
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_727f33ea6496bb66c2db4f7101f40bd7.html">modulo_core</a></li><li class="navelem"><a class="el" href="dir_30c9960b1e12cf048409514a1d0c5545.html">include</a></li><li class="navelem"><a class="el" href="dir_2397dea4246cf971150250488a69dca4.html">modulo_core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Recorder.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#pragma once</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;typeinfo&gt;</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;modulo_core/Cell.hpp&quot;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacemodulo_1_1core.html">modulo::core</a> {</div><div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="classmodulo_1_1core_1_1_recorder.html">   14</a></span>&#160;<span class="keyword">class </span><a class="code" href="classmodulo_1_1core_1_1_recorder.html">Recorder</a> : <span class="keyword">public</span> <a class="code" href="classmodulo_1_1core_1_1_cell.html">Cell</a> {</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;  std::chrono::time_point&lt;std::chrono::system_clock&gt; start_time;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;  std::chrono::time_point&lt;std::chrono::system_clock&gt; end_time;  </div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> DurationT&gt;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classmodulo_1_1core_1_1_recorder.html#a0eedef6a60686f859bf8950677b86b25">Recorder</a>(<span class="keyword">const</span> std::string&amp; node_name, <span class="keyword">const</span> std::chrono::duration&lt;int64_t, DurationT&gt;&amp; period, <span class="keywordtype">bool</span> intra_process_comms = <span class="keyword">false</span>);</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <a class="code" href="classmodulo_1_1core_1_1_recorder.html#ab5f7efe5bd76ec2c6507a6e7d99f441c">~Recorder</a>();</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="classmodulo_1_1core_1_1_recorder.html#a091319dedefc76bb8b78081bde0afd8a">get_start_time</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="classmodulo_1_1core_1_1_recorder.html#a314ed8c2c4285b6c1550002c05298711">get_end_time</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classmodulo_1_1core_1_1_recorder.html#ab77ddbbe836f1f9e6ec8ea9bef6c3165">on_configure</a>();</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classmodulo_1_1core_1_1_recorder.html#ac6e63d4d0fa1714477abd0fc89f7b184">on_activate</a>();</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classmodulo_1_1core_1_1_recorder.html#a5ff0ca4da82e65f1aba739ec3614b26d">on_deactivate</a>();</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classmodulo_1_1core_1_1_recorder.html#ab8a6ee2c04694f2ff150965a6cdebb32">on_cleanup</a>();</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classmodulo_1_1core_1_1_recorder.html#a21ac59c97ec629da2b72ac8e978420f8">on_shutdown</a>();</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classmodulo_1_1core_1_1_recorder.html#aa1b7054979695e5031d956061d475736">step</a>();</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classmodulo_1_1core_1_1_recorder.html#acfe30694cf66382c552a0b5694b00f54">record</a>(<span class="keyword">const</span> state_representation::State&amp; state) <span class="keyword">const</span>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classmodulo_1_1core_1_1_recorder.html#acfe30694cf66382c552a0b5694b00f54">record</a>(<span class="keyword">const</span> state_representation::CartesianState&amp; state) <span class="keyword">const</span>;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classmodulo_1_1core_1_1_recorder.html#acfe30694cf66382c552a0b5694b00f54">record</a>(<span class="keyword">const</span> state_representation::JointState&amp; state) <span class="keyword">const</span>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;};</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> DurationT&gt;</div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="classmodulo_1_1core_1_1_recorder.html#a0eedef6a60686f859bf8950677b86b25">  118</a></span>&#160;<a class="code" href="classmodulo_1_1core_1_1_recorder.html#a0eedef6a60686f859bf8950677b86b25">Recorder::Recorder</a>(<span class="keyword">const</span> std::string&amp; node_name, <span class="keyword">const</span> std::chrono::duration&lt;int64_t, DurationT&gt;&amp; period, <span class="keywordtype">bool</span> intra_process_comms) : <a class="code" href="classmodulo_1_1core_1_1_cell.html">Cell</a>(node_name, period, intra_process_comms) {}</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="classmodulo_1_1core_1_1_recorder.html#a091319dedefc76bb8b78081bde0afd8a">  120</a></span>&#160;<span class="keyword">inline</span> <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="classmodulo_1_1core_1_1_recorder.html#a091319dedefc76bb8b78081bde0afd8a">Recorder::get_start_time</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">return</span> start_time;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="classmodulo_1_1core_1_1_recorder.html#a314ed8c2c4285b6c1550002c05298711">  124</a></span>&#160;<span class="keyword">inline</span> <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="classmodulo_1_1core_1_1_recorder.html#a314ed8c2c4285b6c1550002c05298711">Recorder::get_end_time</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">return</span> end_time;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}<span class="comment">// namespace modulo::core</span></div><div class="ttc" id="classmodulo_1_1core_1_1_recorder_html_aa1b7054979695e5031d956061d475736"><div class="ttname"><a href="classmodulo_1_1core_1_1_recorder.html#aa1b7054979695e5031d956061d475736">modulo::core::Recorder::step</a></div><div class="ttdeci">void step()</div><div class="ttdoc">Function computing one step of calculation. It is called periodically in the run function. </div><div class="ttdef"><b>Definition:</b> <a href="_recorder_8cpp_source.html#l00030">Recorder.cpp:30</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_recorder_html_ab77ddbbe836f1f9e6ec8ea9bef6c3165"><div class="ttname"><a href="classmodulo_1_1core_1_1_recorder.html#ab77ddbbe836f1f9e6ec8ea9bef6c3165">modulo::core::Recorder::on_configure</a></div><div class="ttdeci">virtual bool on_configure()</div><div class="ttdoc">This function is called time the configure call is made from the lifecycle server. It is used to define behavior such as connecting to a database or resetting an history buffer. After being configured the node can be activated. </div><div class="ttdef"><b>Definition:</b> <a href="_recorder_8cpp_source.html#l00008">Recorder.cpp:8</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_recorder_html_ac6e63d4d0fa1714477abd0fc89f7b184"><div class="ttname"><a href="classmodulo_1_1core_1_1_recorder.html#ac6e63d4d0fa1714477abd0fc89f7b184">modulo::core::Recorder::on_activate</a></div><div class="ttdeci">bool on_activate()</div><div class="ttdoc">This function is called time the activate call is made from the lifecycle server. It activates publis...</div><div class="ttdef"><b>Definition:</b> <a href="_recorder_8cpp_source.html#l00012">Recorder.cpp:12</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_recorder_html_a314ed8c2c4285b6c1550002c05298711"><div class="ttname"><a href="classmodulo_1_1core_1_1_recorder.html#a314ed8c2c4285b6c1550002c05298711">modulo::core::Recorder::get_end_time</a></div><div class="ttdeci">const auto &amp; get_end_time() const</div><div class="ttdoc">Getter of the end_time attribute. </div><div class="ttdef"><b>Definition:</b> <a href="_recorder_8hpp_source.html#l00124">Recorder.hpp:124</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_recorder_html_ab5f7efe5bd76ec2c6507a6e7d99f441c"><div class="ttname"><a href="classmodulo_1_1core_1_1_recorder.html#ab5f7efe5bd76ec2c6507a6e7d99f441c">modulo::core::Recorder::~Recorder</a></div><div class="ttdeci">~Recorder()</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> <a href="_recorder_8cpp_source.html#l00004">Recorder.cpp:4</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_recorder_html_a091319dedefc76bb8b78081bde0afd8a"><div class="ttname"><a href="classmodulo_1_1core_1_1_recorder.html#a091319dedefc76bb8b78081bde0afd8a">modulo::core::Recorder::get_start_time</a></div><div class="ttdeci">const auto &amp; get_start_time() const</div><div class="ttdoc">Getter of the start_time attribute. </div><div class="ttdef"><b>Definition:</b> <a href="_recorder_8hpp_source.html#l00120">Recorder.hpp:120</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_recorder_html_a5ff0ca4da82e65f1aba739ec3614b26d"><div class="ttname"><a href="classmodulo_1_1core_1_1_recorder.html#a5ff0ca4da82e65f1aba739ec3614b26d">modulo::core::Recorder::on_deactivate</a></div><div class="ttdeci">bool on_deactivate()</div><div class="ttdoc">This function is called time the deactivate call is made from the lifecycle server. It deactivates publishing and subsciptions and can be extended to stop a recording or a replay. </div><div class="ttdef"><b>Definition:</b> <a href="_recorder_8cpp_source.html#l00017">Recorder.cpp:17</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_recorder_html_acfe30694cf66382c552a0b5694b00f54"><div class="ttname"><a href="classmodulo_1_1core_1_1_recorder.html#acfe30694cf66382c552a0b5694b00f54">modulo::core::Recorder::record</a></div><div class="ttdeci">bool record(const state_representation::State &amp;state) const</div><div class="ttdoc">Generic function to record a state. This function is called in the step function for each subscriptio...</div><div class="ttdef"><b>Definition:</b> <a href="_recorder_8cpp_source.html#l00039">Recorder.cpp:39</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_recorder_html_a0eedef6a60686f859bf8950677b86b25"><div class="ttname"><a href="classmodulo_1_1core_1_1_recorder.html#a0eedef6a60686f859bf8950677b86b25">modulo::core::Recorder::Recorder</a></div><div class="ttdeci">Recorder(const std::string &amp;node_name, const std::chrono::duration&lt; int64_t, DurationT &gt; &amp;period, bool intra_process_comms=false)</div><div class="ttdoc">Constructor for the Recorder class. </div><div class="ttdef"><b>Definition:</b> <a href="_recorder_8hpp_source.html#l00118">Recorder.hpp:118</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_cell_html"><div class="ttname"><a href="classmodulo_1_1core_1_1_cell.html">modulo::core::Cell</a></div><div class="ttdoc">Abstract class to define a Cell A Cell is the base class of the whole architecture. It handles all the basic ROS communications such as definitions of subscriptions, publishers and service calls. It can then be derived into a MotionGenerator, a Controller, a Sensor, or a RobotInterface. It is derived from a lifecycle node which allows to use ROS2 state machine functionalities for nodes. </div><div class="ttdef"><b>Definition:</b> <a href="_cell_8hpp_source.html#l00039">Cell.hpp:39</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_recorder_html_a21ac59c97ec629da2b72ac8e978420f8"><div class="ttname"><a href="classmodulo_1_1core_1_1_recorder.html#a21ac59c97ec629da2b72ac8e978420f8">modulo::core::Recorder::on_shutdown</a></div><div class="ttdeci">virtual bool on_shutdown()</div><div class="ttdoc">This function is called time the shutdown call is made from the lifecycle server. It terminates the n...</div><div class="ttdef"><b>Definition:</b> <a href="_recorder_8cpp_source.html#l00026">Recorder.cpp:26</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_recorder_html"><div class="ttname"><a href="classmodulo_1_1core_1_1_recorder.html">modulo::core::Recorder</a></div><div class="ttdoc">Abstract class to define a Recorder A Recorder is used to listen on specific topics and record the re...</div><div class="ttdef"><b>Definition:</b> <a href="_recorder_8hpp_source.html#l00014">Recorder.hpp:14</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_recorder_html_ab8a6ee2c04694f2ff150965a6cdebb32"><div class="ttname"><a href="classmodulo_1_1core_1_1_recorder.html#ab8a6ee2c04694f2ff150965a6cdebb32">modulo::core::Recorder::on_cleanup</a></div><div class="ttdeci">virtual bool on_cleanup()</div><div class="ttdoc">This function is called time the cleanup call is made from the lifecycle server. It cleans the node a...</div><div class="ttdef"><b>Definition:</b> <a href="_recorder_8cpp_source.html#l00022">Recorder.cpp:22</a></div></div>
<div class="ttc" id="namespacemodulo_1_1core_html"><div class="ttname"><a href="namespacemodulo_1_1core.html">modulo::core</a></div><div class="ttdef"><b>Definition:</b> <a href="_cell_8hpp_source.html#l00027">Cell.hpp:27</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
