<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Modulo: /Users/enricoeberhard/Documents/EPFL/Dev/modulo/source/modulo_core/include/modulo_core/Component.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Modulo
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_727f33ea6496bb66c2db4f7101f40bd7.html">modulo_core</a></li><li class="navelem"><a class="el" href="dir_30c9960b1e12cf048409514a1d0c5545.html">include</a></li><li class="navelem"><a class="el" href="dir_2397dea4246cf971150250488a69dca4.html">modulo_core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Component.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#pragma once</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;functional&gt;</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;list&gt;</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;state_representation/parameters/Event.hpp&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;state_representation/parameters/Parameter.hpp&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;state_representation/parameters/ParameterInterface.hpp&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;state_representation/parameters/Predicate.hpp&gt;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;modulo_core/Cell.hpp&quot;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacemodulo_1_1core.html">modulo::core</a> {</div><div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="classmodulo_1_1core_1_1_component.html">   17</a></span>&#160;<span class="keyword">class </span><a class="code" href="classmodulo_1_1core_1_1_component.html">Component</a> : <span class="keyword">public</span> <a class="code" href="classmodulo_1_1core_1_1_cell.html">core::Cell</a> {</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;  std::map&lt;std::string, std::shared_ptr&lt;state_representation::Predicate&gt;&gt; predicates_;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  std::map&lt;std::string, std::function&lt;bool(void)&gt;&gt; predicate_functions_;              </div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  <span class="keywordtype">void</span> on_init();</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keywordtype">void</span> evaluate_predicate_functions();</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  std::string generate_predicate_topic(<span class="keyword">const</span> std::string&amp; predicate_name) <span class="keyword">const</span>;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">protected</span>:</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classmodulo_1_1core_1_1_component.html#ad2c236dd5dceb642701d4214a4f8cfb5">add_predicate</a>(<span class="keyword">const</span> std::shared_ptr&lt;state_representation::Predicate&gt;&amp; predicate);</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classmodulo_1_1core_1_1_component.html#ad2c236dd5dceb642701d4214a4f8cfb5">add_predicate</a>(<span class="keyword">const</span> std::string&amp; predicate_name, <span class="keyword">const</span> std::function&lt;<span class="keywordtype">bool</span>(<span class="keywordtype">void</span>)&gt;&amp; predicate_function);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classmodulo_1_1core_1_1_component.html#abaaa1b86e5ababe71bd4f0d8c80a87a5">add_received_predicate</a>(<span class="keyword">const</span> std::string&amp; predicate_name, <span class="keyword">const</span> std::string&amp; channel);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classmodulo_1_1core_1_1_component.html#a6cb42f302126b2d7ec3025fe89c6abee">get_predicate_value</a>(<span class="keyword">const</span> std::string&amp; predicate_name) <span class="keyword">const</span>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classmodulo_1_1core_1_1_component.html#a3c7870fffa927828cabe1bd4275e3c13">set_predicate_value</a>(<span class="keyword">const</span> std::string&amp; predicate_name, <span class="keywordtype">bool</span> value);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classmodulo_1_1core_1_1_component.html#a52895d590928bb716514c2705c5522e2">add_event</a>(<span class="keyword">const</span> std::shared_ptr&lt;state_representation::Event&gt;&amp; event);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classmodulo_1_1core_1_1_component.html#a52895d590928bb716514c2705c5522e2">add_event</a>(<span class="keyword">const</span> std::string&amp; event_name, <span class="keyword">const</span> std::function&lt;<span class="keywordtype">bool</span>(<span class="keywordtype">void</span>)&gt;&amp; event_function);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classmodulo_1_1core_1_1_component.html#ae4abc442a98dc908617829745ebbc7e8">add_received_event</a>(<span class="keyword">const</span> std::string&amp; event_name, <span class="keyword">const</span> std::string&amp; channel);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classmodulo_1_1core_1_1_component.html#a7e5be076c4af8fb2d9948b8b07e99f60">read_event_value</a>(<span class="keyword">const</span> std::string&amp; event_name);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classmodulo_1_1core_1_1_component.html#ad3938be8a0ef8614a72884d62fab4307">set_event_value</a>(<span class="keyword">const</span> std::string&amp; event_name, <span class="keywordtype">bool</span> value);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> DurationT&gt;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classmodulo_1_1core_1_1_component.html#a7dcfee57c9a3eb9f83310acb57f33624">Component</a>(<span class="keyword">const</span> std::string&amp; node_name,</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                     <span class="keyword">const</span> std::chrono::duration&lt;int64_t, DurationT&gt;&amp; period,</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                     <span class="keywordtype">bool</span> intra_process_comms = <span class="keyword">false</span>);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classmodulo_1_1core_1_1_component.html#a7dcfee57c9a3eb9f83310acb57f33624">Component</a>(<span class="keyword">const</span> rclcpp::NodeOptions&amp; options);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <a class="code" href="classmodulo_1_1core_1_1_component.html#a3862b4611637a34646d022066ac0f7ff">~Component</a>();</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keyword">const</span> std::list&lt;std::shared_ptr&lt;state_representation::Predicate&gt;&gt; <a class="code" href="classmodulo_1_1core_1_1_component.html#abcf5a401a5324fb5faf84c7326bf8515">get_predicates</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classmodulo_1_1core_1_1_component.html#a8cd10bb22fc562dd51ca43737a9b3ca2">step</a>() <span class="keyword">override</span> = 0;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;};</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> DurationT&gt;</div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="classmodulo_1_1core_1_1_component.html#a7dcfee57c9a3eb9f83310acb57f33624">  152</a></span>&#160;<a class="code" href="classmodulo_1_1core_1_1_component.html#a7dcfee57c9a3eb9f83310acb57f33624">Component::Component</a>(<span class="keyword">const</span> std::string&amp; node_name,</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                     <span class="keyword">const</span> std::chrono::duration&lt;int64_t, DurationT&gt;&amp; period,</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                     <span class="keywordtype">bool</span> intra_process_comms) : <a class="code" href="classmodulo_1_1core_1_1_cell.html">Cell</a>(node_name, period, intra_process_comms) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  this-&gt;on_init();</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;}</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}<span class="comment">// namespace modulo::core</span></div><div class="ttc" id="classmodulo_1_1core_1_1_component_html_ad3938be8a0ef8614a72884d62fab4307"><div class="ttname"><a href="classmodulo_1_1core_1_1_component.html#ad3938be8a0ef8614a72884d62fab4307">modulo::core::Component::set_event_value</a></div><div class="ttdeci">void set_event_value(const std::string &amp;event_name, bool value)</div><div class="ttdoc">Set the value of the event given as parameter. </div><div class="ttdef"><b>Definition:</b> <a href="_component_8cpp_source.html#l00102">Component.cpp:102</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_component_html_ad2c236dd5dceb642701d4214a4f8cfb5"><div class="ttname"><a href="classmodulo_1_1core_1_1_component.html#ad2c236dd5dceb642701d4214a4f8cfb5">modulo::core::Component::add_predicate</a></div><div class="ttdeci">void add_predicate(const std::shared_ptr&lt; state_representation::Predicate &gt; &amp;predicate)</div><div class="ttdoc">Add a predicate to the map of predicates. </div><div class="ttdef"><b>Definition:</b> <a href="_component_8cpp_source.html#l00034">Component.cpp:34</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_component_html_a7dcfee57c9a3eb9f83310acb57f33624"><div class="ttname"><a href="classmodulo_1_1core_1_1_component.html#a7dcfee57c9a3eb9f83310acb57f33624">modulo::core::Component::Component</a></div><div class="ttdeci">Component(const std::string &amp;node_name, const std::chrono::duration&lt; int64_t, DurationT &gt; &amp;period, bool intra_process_comms=false)</div><div class="ttdoc">Constructor for the Component class. </div><div class="ttdef"><b>Definition:</b> <a href="_component_8hpp_source.html#l00152">Component.hpp:152</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_component_html_a8cd10bb22fc562dd51ca43737a9b3ca2"><div class="ttname"><a href="classmodulo_1_1core_1_1_component.html#a8cd10bb22fc562dd51ca43737a9b3ca2">modulo::core::Component::step</a></div><div class="ttdeci">virtual void step() override=0</div><div class="ttdoc">Function computing one step of calculation. It is called periodically in the run function. </div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_component_html_a7e5be076c4af8fb2d9948b8b07e99f60"><div class="ttname"><a href="classmodulo_1_1core_1_1_component.html#a7e5be076c4af8fb2d9948b8b07e99f60">modulo::core::Component::read_event_value</a></div><div class="ttdeci">bool read_event_value(const std::string &amp;event_name)</div><div class="ttdoc">Read the value of the event given as parameter. </div><div class="ttdef"><b>Definition:</b> <a href="_component_8cpp_source.html#l00094">Component.cpp:94</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_component_html_a3862b4611637a34646d022066ac0f7ff"><div class="ttname"><a href="classmodulo_1_1core_1_1_component.html#a3862b4611637a34646d022066ac0f7ff">modulo::core::Component::~Component</a></div><div class="ttdeci">~Component()</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> <a href="_component_8cpp_source.html#l00020">Component.cpp:20</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_component_html_a6cb42f302126b2d7ec3025fe89c6abee"><div class="ttname"><a href="classmodulo_1_1core_1_1_component.html#a6cb42f302126b2d7ec3025fe89c6abee">modulo::core::Component::get_predicate_value</a></div><div class="ttdeci">bool get_predicate_value(const std::string &amp;predicate_name) const</div><div class="ttdoc">Get the value of the predicate given as parameter. </div><div class="ttdef"><b>Definition:</b> <a href="_component_8cpp_source.html#l00066">Component.cpp:66</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_component_html_a3c7870fffa927828cabe1bd4275e3c13"><div class="ttname"><a href="classmodulo_1_1core_1_1_component.html#a3c7870fffa927828cabe1bd4275e3c13">modulo::core::Component::set_predicate_value</a></div><div class="ttdeci">void set_predicate_value(const std::string &amp;predicate_name, bool value)</div><div class="ttdoc">Set the value of the predicate given as parameter. </div><div class="ttdef"><b>Definition:</b> <a href="_component_8cpp_source.html#l00074">Component.cpp:74</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_component_html_abcf5a401a5324fb5faf84c7326bf8515"><div class="ttname"><a href="classmodulo_1_1core_1_1_component.html#abcf5a401a5324fb5faf84c7326bf8515">modulo::core::Component::get_predicates</a></div><div class="ttdeci">const std::list&lt; std::shared_ptr&lt; state_representation::Predicate &gt; &gt; get_predicates() const</div><div class="ttdoc">Get the list of predicates of the action. </div><div class="ttdef"><b>Definition:</b> <a href="_component_8cpp_source.html#l00106">Component.cpp:106</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_component_html_abaaa1b86e5ababe71bd4f0d8c80a87a5"><div class="ttname"><a href="classmodulo_1_1core_1_1_component.html#abaaa1b86e5ababe71bd4f0d8c80a87a5">modulo::core::Component::add_received_predicate</a></div><div class="ttdeci">void add_received_predicate(const std::string &amp;predicate_name, const std::string &amp;channel)</div><div class="ttdoc">Add an external predicate to the map of predicates which value will be registered through the subscri...</div><div class="ttdef"><b>Definition:</b> <a href="_component_8cpp_source.html#l00059">Component.cpp:59</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_cell_html"><div class="ttname"><a href="classmodulo_1_1core_1_1_cell.html">modulo::core::Cell</a></div><div class="ttdoc">Abstract class to define a Cell A Cell is the base class of the whole architecture. It handles all the basic ROS communications such as definitions of subscriptions, publishers and service calls. It can then be derived into a MotionGenerator, a Controller, a Sensor, or a RobotInterface. It is derived from a lifecycle node which allows to use ROS2 state machine functionalities for nodes. </div><div class="ttdef"><b>Definition:</b> <a href="_cell_8hpp_source.html#l00039">Cell.hpp:39</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_component_html_a52895d590928bb716514c2705c5522e2"><div class="ttname"><a href="classmodulo_1_1core_1_1_component.html#a52895d590928bb716514c2705c5522e2">modulo::core::Component::add_event</a></div><div class="ttdeci">void add_event(const std::shared_ptr&lt; state_representation::Event &gt; &amp;event)</div><div class="ttdoc">Add an event to the map of predicates. </div><div class="ttdef"><b>Definition:</b> <a href="_component_8cpp_source.html#l00082">Component.cpp:82</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_component_html_ae4abc442a98dc908617829745ebbc7e8"><div class="ttname"><a href="classmodulo_1_1core_1_1_component.html#ae4abc442a98dc908617829745ebbc7e8">modulo::core::Component::add_received_event</a></div><div class="ttdeci">void add_received_event(const std::string &amp;event_name, const std::string &amp;channel)</div><div class="ttdoc">Add an external event to the map of predicates which value will be registered through the subscribed ...</div><div class="ttdef"><b>Definition:</b> <a href="_component_8cpp_source.html#l00090">Component.cpp:90</a></div></div>
<div class="ttc" id="namespacemodulo_1_1core_html"><div class="ttname"><a href="namespacemodulo_1_1core.html">modulo::core</a></div><div class="ttdef"><b>Definition:</b> <a href="_cell_8hpp_source.html#l00027">Cell.hpp:27</a></div></div>
<div class="ttc" id="classmodulo_1_1core_1_1_component_html"><div class="ttname"><a href="classmodulo_1_1core_1_1_component.html">modulo::core::Component</a></div><div class="ttdoc">Abstract class to define an component, handling base predicates. </div><div class="ttdef"><b>Definition:</b> <a href="_component_8hpp_source.html#l00017">Component.hpp:17</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
